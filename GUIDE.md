# üéôÔ∏è voxt ‚Äî Telegram Voice-to-Text Bot

–ë–æ—Ç —è–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –≥–æ–ª–æ—Å–æ–≤—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —Ç–∞ –∫—Ä—É–∂–µ—á–∫–∏ (video notes) –≤ —Ç–µ–∫—Å—Ç.

## –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### 1. –°—Ç–≤–æ—Ä–∏ –±–æ—Ç–∞ –≤ Telegram

1. –í—ñ–¥–∫—Ä–∏–π [@BotFather](https://t.me/BotFather) –≤ Telegram
2. `/newbot` ‚Üí –¥–∞–π —ñ–º º—è ‚Üí –æ—Ç—Ä–∏–º–∞–π **—Ç–æ–∫–µ–Ω**
3. `/setprivacy` ‚Üí –≤–∏–±–µ—Ä–∏ —Å–≤–æ–≥–æ –±–æ—Ç–∞ ‚Üí `Disable` (—â–æ–± –±–æ—Ç –±–∞—á–∏–≤ –≤—Å—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ –≥—Ä—É–ø—ñ)

### 2. –ù–∞–ª–∞—à—Ç—É–π –ø—Ä–æ—î–∫—Ç

```bash
# –í—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
npm install

# –°—Ç–≤–æ—Ä–∏ .env –∑ –ø—Ä–∏–∫–ª–∞–¥—É
cp .env.example .env

# –í—Å—Ç–∞–≤ —Å–≤—ñ–π —Ç–æ–∫–µ–Ω
nano .env  # –∞–±–æ –±—É–¥—å-—è–∫–∏–π —Ä–µ–¥–∞–∫—Ç–æ—Ä
```

### 3. –ó–∞–ø—É—Å—Ç–∏

```bash
npm run dev
```

–ë–æ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –∑ hot-reload (—á–µ—Ä–µ–∑ `tsx watch`).

## –†–µ–∂–∏–º–∏ —Ä–æ–±–æ—Ç–∏

–ó–∞–¥–∞—î—Ç—å—Å—è —á–µ—Ä–µ–∑ `BOT_MODE` –≤ `.env`:

| –†–µ–∂–∏–º | –û–ø–∏—Å |
|---|---|
| `mention` (default) | –ë–æ—Ç —Ä–µ–∞–≥—É—î —Ç—ñ–ª—å–∫–∏ –∫–æ–ª–∏ –π–æ–≥–æ —Ç–µ–≥–Ω—É–ª–∏ (`@username`) —É –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ –≥–æ–ª–æ—Å–æ–≤–µ |
| `auto` | –ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±—É—î **–≤—Å—ñ** –≥–æ–ª–æ—Å–æ–≤—ñ/–∫—Ä—É–∂–µ—á–∫–∏ –≤ —á–∞—Ç—ñ |

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

```
voxt/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ bot.ts                        # Entry point ‚Äî —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ config.ts                     # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –∑ .env
‚îÇ   ‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ voice.handler.ts          # –û–±—Ä–æ–±–∫–∞ voice + video_note
‚îÇ   ‚îî‚îÄ‚îÄ services/
‚îÇ       ‚îú‚îÄ‚îÄ transcribe.service.ts     # OpenAI Whisper API
‚îÇ       ‚îî‚îÄ‚îÄ rate-limiter.service.ts   # Rate limiting (JSON file)
‚îú‚îÄ‚îÄ data/                              # Usage data (gitignored)
‚îú‚îÄ‚îÄ .env.example
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ tsconfig.json
‚îî‚îÄ‚îÄ GUIDE.md                          # ‚Üê —Ç–∏ —Ç—É—Ç
```

## –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è Whisper

–ó–∞—Ä–∞–∑ –±–æ—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î **stub** ‚Äî –ø–æ–≤–µ—Ä—Ç–∞—î –∑–∞–≥–ª—É—à–∫—É –∑–∞–º—ñ—Å—Ç—å —Ç–µ–∫—Å—Ç—É. –Ñ –¥–≤–∞ —à–ª—è—Ö–∏:

### –í–∞—Ä—ñ–∞–Ω—Ç 1: OpenAI Whisper API (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –¥–ª—è —Å—Ç–∞—Ä—Ç—É)

–ù–∞–π–ø—Ä–æ—Å—Ç—ñ—à–∏–π —Å–ø–æ—Å—ñ–±. –ü–æ—Ç—Ä—ñ–±–µ–Ω API –∫–ª—é—á –≤—ñ–¥ OpenAI.

```bash
npm install openai
```

–í `.env` –¥–æ–¥–∞–π:
```
OPENAI_API_KEY=sk-...
```

–í `src/services/transcribe.service.ts` –∑–∞–º—ñ–Ω–∏ stub –Ω–∞:

```typescript
import OpenAI from "openai";

const openai = new OpenAI();

export async function transcribe(audioBuffer: Buffer, mimeType: string): Promise<string> {
  const file = new File([audioBuffer], "audio.ogg", { type: mimeType });
  const result = await openai.audio.transcriptions.create({
    file,
    model: "whisper-1",
  });
  return result.text;
}
```

**–¶—ñ–Ω–∞**: ~$0.006 –∑–∞ —Ö–≤–∏–ª–∏–Ω—É –∞—É–¥—ñ–æ.

### –í–∞—Ä—ñ–∞–Ω—Ç 2: –õ–æ–∫–∞–ª—å–Ω–∏–π Whisper (Python –º—ñ–∫—Ä–æ—Å–µ—Ä–≤—ñ—Å)

–î–ª—è –ø–æ–≤–Ω–æ—ó –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—ñ –∞–±–æ –≤–µ–ª–∏–∫–∏—Ö –æ–± º—î–º—ñ–≤. –ü–æ—Ç—Ä—ñ–±–µ–Ω GPU –¥–ª—è —à–≤–∏–¥–∫–æ—ó —Ä–æ–±–æ—Ç–∏.

```bash
# –í –æ–∫—Ä–µ–º—ñ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó
pip install openai-whisper flask
```

–°—Ç–≤–æ—Ä–∏ –ø—Ä–æ—Å—Ç–∏–π Flask —Å–µ—Ä–≤–µ—Ä, —ñ –≤ `transcribe.service.ts` –∑—Ä–æ–±–∏ HTTP-–∑–∞–ø–∏—Ç –¥–æ –Ω—å–æ–≥–æ. –ü—Ä–∏–∫–ª–∞–¥–∏ —î –≤ –∫–æ–º–µ–Ω—Ç–∞—Ä—è—Ö —Ñ–∞–π–ª—É.

## –ö–æ–º–∞–Ω–¥–∏ –±–æ—Ç–∞

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å |
|---|---|
| `/start` | –ü—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è + —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Ä–µ–∂–∏–º |
| `/mode` | –ü–æ–∫–∞–∑–∞—Ç–∏ –ø–æ—Ç–æ—á–Ω–∏–π —Ä–µ–∂–∏–º —Ä–æ–±–æ—Ç–∏ |
| `/limit` | –°–∫—ñ–ª—å–∫–∏ —â–µ –º–æ–∂–Ω–∞ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±—É–≤–∞—Ç–∏ —Å—å–æ–≥–æ–¥–Ω—ñ |

## Roadmap

- [x] –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ OpenAI Whisper API
- [x] Rate limiting (1 –≥–æ–¥/–¥–µ–Ω—å, JSON file)
- [ ] –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –∞—É–¥—ñ–æ-—Ñ–∞–π–ª—ñ–≤ (–Ω–µ —Ç—ñ–ª—å–∫–∏ voice)
- [ ] –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è –º–æ–≤–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
- [ ] Inline mode (—Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü—ñ—è —á–µ—Ä–µ–∑ @bot –≤ –±—É–¥—å-—è–∫–æ–º—É —á–∞—Ç—ñ)
- [ ] –õ–æ–∫–∞–ª—å–Ω–∏–π Whisper —è–∫ –æ–∫—Ä–µ–º–∏–π –º—ñ–∫—Ä–æ—Å–µ—Ä–≤—ñ—Å
